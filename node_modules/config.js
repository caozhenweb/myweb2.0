/* cache config */
var Config = {};
/**
 *
 * get json configure file
 * @param fileName string
 * @param key string
 */
var FS = require('fs');
exports.get = function(fileName, key){
	// if it has read, read it from tmp config
	if(Config[fileName]){
		return Config[fileName][key] ? Config[fileName][key] : Config[fileName];
	}
	var configJson = {};

    try{
        var str = FS.readFileSync(fileName,'utf8');
		// remove the comments
		str = str.replace(/(?:^|\n|\r)\s*\/\*[\s\S]*?\*\/\s*(?:\r|\n|$)/g, '\n').replace(/(?:^|\n|\r)\s*\/\/.*(?:\r|\n|$)/g, '\n'); 
        configJson = JSON.parse(str);
    }catch(e){
		console.log(e);
        return {};
    }

    // add configure content to config tmp
    Config[fileName] = configJson;
    return configJson[key] ? configJson[key] : configJson;
}

/**
 *
 * get the file content
 * @param fileName string
 */
exports.getSource = function(fileName){
	// if it has read, read it from tmp config
	if(Config[fileName]){
		return Config[fileName] ? Config[fileName] : Config[fileName];
	}
	var str = ''
	  , logInfo    = {};
	  
	logInfo['filename'] = fileName;
	
	try{
        var str = FS.readFileSync(fileName,'utf8');
    }catch(e){
    	str = '';
    }
     // add configure content to config tmp
    Config[fileName] = str;
    return str;
}